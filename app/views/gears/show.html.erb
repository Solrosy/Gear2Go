<div class="mb-3"><%= link_to "Back", :back %></div>
  <div class="row justify-content-center">
      <%# Image %>
      <div class="col-12 col-xs-12 col-sm-12 col-md-6 col-lg-3 mb-3">
        <% if @gear.photo.key? %>
          <%= cl_image_tag @gear.photo.key, class: "card-img-top rounded-4", crop: :fill%>
        <% else %>
          <div>no image</div>
        <% end %>
      </div>

      <%# Description part %>
      <div class="col-12 col-sm-12 col-md-6 col-lg-5">
        <h3><%= @gear.name %></h3>
        <div class="mb-3"><%= @gear.description %></div>
        <h4><%= @gear.hourly_rate %>â‚¬/hour</h4>
        <div class="mt-2">Rental Location:</div>
        <div><%= @gear.user.business_name ? @gear.user.business_name : "Business name not given" %></div>
        <div><%= @gear.user.city ? @gear.user.city : "City name not given" %></div>
      </div>

      <div class="w-100"></div> <!-- line break for bootstrap -->

      <%# Booking details %>
      <div class="col-12 col-sm-12 col-lg-8 py-3">
        <div class="my-4">
          <h3 class="mb-3">1. Choose a date & time</h3>
          <div id="data-controller" data-controller="booking" data-booking-slots-value="<%= @next_7_days_with_slots.to_json %>" >
            <div class="row mx-0">
              <%# Previous week button that does not go into the past (SL)%>
              <div class="col text-center p-0 align-self-center">
                <div>
                  <% if @date > Date.today %>
                    <%= link_to "<", gear_path(@gear, date: @date - 1.week), class: "btn btn-light" %>
                  <% else %>
                    <%= link_to "<", "#", class: "btn disabled" %>
                  <% end %>
                </div>
              </div>

              <%# Weekday buttons (SL) %>
              <% (@date..@date + 6.day).to_a.each do |day| %>
                <div class="col border text-center p-0 align-self-center">
                  <div class="btn w-100" data-booking-target="date" data-action="click->booking#switchDate" data-booking-date-value="<%= day %>">
                    <%= day.strftime("%a") %><br>
                    <%= day.strftime("%d") %>
                  </div>
                </div>
              <% end %>

              <%# Next week button (SL) %>
              <div class="col text-center p-0 align-self-center">
                <div>
                  <%= link_to ">", gear_path(@gear, date: @date + 1.week), class: "btn btn-light"  %>
                </div>
              </div>
            </div>

            <%# Date selected generated by JS depending on active button (SL) %>
            <h5 id="selected-date" class="mt-3 text-center"></h5>

            <%# Time slots as buttons generated by booking_controller.js (SL) %>
            <div class="d-flex flex-column my-3 mx-5">
              <div data-booking-target="timeSelect"></div>
            </div>
          </div>
        </div>

        <%= form_with(model: [@gear, @booking], url: gear_bookings_path(@gear), html: { class: 'needs-validation', novalidate: true }) do |form| %>
            <h3 class="my-3">2. Enter personal details</h3>
            <div class="form-group mb-3">
              <%= form.label :first_name, class: "form-label" %>
              <%= form.text_field :first_name, class: "form-control" %>
            </div>

            <div class="form-group mb-3">
              <%= form.label :last_name, class: "form-label" %>
              <%= form.text_field :last_name, class: "form-control" %>
            </div>

            <div class="form-group mb-3">
              <%= form.label :email, class: "form-label" %>
              <%= form.email_field :email, class: "form-control" %>
            </div>

            <div class="form-group mt-4">
              <%= form.submit "Book now", class: "text-white btn btn-primary w-100" %>
            </div>
          <% end %>

      </div>
  </div>
